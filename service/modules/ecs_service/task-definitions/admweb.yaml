- name: app
  image: "${docker_repository}:latest_main"
  essential: true
  portMappings:
    - containerPort: ${nginx_container_port}
      hostPort: 80
      protocol: tcp
  environment:
    - name: ENVIRONMENT
      value: "${environment}"
    - name: NODE_ENV
      value: production
    # - name: DB_USER
    #   value: "${db_username}"
    # - name: DB_NAME
    #   value: "${db_name}"
    # - name: DB_PORT
    #   value: "${db_port}"
    # - name: DB_HOST
    #   value: "${db_host}"
  secrets:
    - name: DB_PASSWORD
      valueFrom: "${db_password_secrets_arn}"
  logConfiguration:
    logDriver: awslogs
    options:
      awslogs-region: "${aws_region}"
      awslogs-group: "${app_log_group}"
      awslogs-stream-prefix: "app-"
